#!/bin/sh

COMMIT_MSG=${1:-"Updated docs"}
echo $COMMIT_MSG
echo "Publishing docs to leanix/reporting..."

rm -rf leanix-reporting
git clone https://github.com/leanix/leanix-reporting.git

rm -rf ./leanix-reporting/docs
mv ./docs/ ./leanix-reporting/docs

cd leanix-reporting

# Disable Jekyll for Docs (Disable Jekyll so Github pages copies files with "_" at the beginning too.)
touch docs/.nojekyll

git pull
git add docs
git commit -am"$COMMIT_MSG"
git push
git log -1

cd ..
rm -rf leanix-reporting
